# BeepMusic

<h3 style="color:red">注意，当前的代码版本已更新，但release与readme还没有来得及更新</h3>

## 功能介绍

将简谱转换为频率和时长，从而供Beep函数使用，让蜂鸣器达到奏乐效果

## 简谱表示规则

**基本音符**：1(do), 2(re), 3(mi), 4(fa), 5(sol), 6(la), 7(si), 0(休止符)

**前缀**：调整音高，`+`升高八度，`-`降低八度（可叠加，如`++5`）

**后缀**：

用于调整单个音的时值

- `_`：减时线（每增加一个，时值减半）

- `-`：增时线（每增加一个，时值加倍）

- `.`：附点（时值增加50%，最多两个）

**速度设置**：`t=x;`（x拍/分钟，默认60），此值为BPM值，简谱一般会提供，不提供的也有参考信息进行查询，一些专业软件也提供检测功能

## 示例

《call of silence》

参考[Call of Silence简谱](https://www.cangqiang.com.cn/d/39975.html)，基本遵循原谱内容，在后半部分和前面的细节部分做了一定的调整

下面是标准的速度版本：

```
t=72; -6_ 3_ 3. 3_ -7. -6__ 1-. -6_ 3_ 3. 3_ 7. +1__ 3-. 6_ +3_ +3. +3_ 7. +1__ 5-. 5_ 3__ 5-. +2_ +1__ +2.. +1__. 6-. 0--- 3_ 2_ 2_ 1_ 1_ 5_ 1 -7_ 1-. 3_ 2_ 2_ 1_ 1_ 3_ 2 3_ 1-. 3_ 2_ 2_ 1_ 1_ 5_ 5_ 5_ -7_ 1-. -6_ 1_ 2 2_ 1_ 2_ 3_ 2_ 2 1. 0 0_ +1_ 7_ 3__ 6. 0_ +1_. 7_ 3__ 1. 0_ +1_ 7_ 3__ 6 6__  7 +2__ +1. 0_ +1_ 7 3__ 6_. 0_ +1_ 7_ 3__ 1_- 0_ +1_ 7_ +1__ +2 +3_ +3_. +1_ 7-
```

对于外放，蜂鸣器可能会吞掉一些声音，`t=45;`可能更合适

## 软件操作

初始输出如下：

```
welcome
```

将简谱按照规则记录，复制到控制台，回车后会得到输出，如下

```
t=100; 1 1 5 5 6 6 5- 4 4 3 3 2 2 1-
Play: 1 => Freq: 261Hz, Duration: 600ms
Play: 1 => Freq: 261Hz, Duration: 600ms
Play: 5 => Freq: 392Hz, Duration: 600ms
Play: 5 => Freq: 392Hz, Duration: 600ms
Play: 6 => Freq: 440Hz, Duration: 600ms
Play: 6 => Freq: 440Hz, Duration: 600ms
Play: 5- => Freq: 392Hz, Duration: 1200ms
Play: 4 => Freq: 349Hz, Duration: 600ms
Play: 4 => Freq: 349Hz, Duration: 600ms
Play: 3 => Freq: 329Hz, Duration: 600ms
Play: 3 => Freq: 329Hz, Duration: 600ms
Play: 2 => Freq: 293Hz, Duration: 600ms
Play: 2 => Freq: 293Hz, Duration: 600ms
Play: 1- => Freq: 261Hz, Duration: 1200ms
```

`play`表示发出声响的音符，后面跟着音符的原文是便于查找，`Freq`标记声音频率，`Duration`标记持续时间

特殊的，如下

```
0
Rest: 0 => Duration: 1000ms
```
对于休止符，输出`Rest`，`Freq`参数会被省略

-----

软件运行时，使用`exit`可以退出软件，注意软件对于指令是大小写敏感的

----

# 播放帮助

对于连续播放短声音困难的硬件，建议使用耳机将蜂鸣器转为电脑内音，经过测试，通常的设备在播放「千本桜」（t=180）时，即使使用耳机，仍然会有声音是无法放出的，因此可以采用`t=45;`参数播放，录制结果后对结果加速4.2倍左右